"use strict";angular.module("woozle").factory("WoozleAuthenticationService",function(Restangular){return{login:function(user,success,failed){{var authentication=Restangular.all("api/Auth/credentials?format=json"),data={UserName:user.username,Password:user.password};authentication.post(data).then(success,failed)}}}}),angular.module("woozle").factory("WoozleLoginContextService",["$rootScope","Restangular","$location",function($rootScope,Restangular,$location){var loginContext={};return loginContext.loggedIn=!1,loginContext.loginUser,loginContext.loginUser=null,loginContext.loginMandator=null,loginContext.isLoggedIn=function(){return this.loggedIn},loginContext.loggedInUser=function(){return this.loginUser},loginContext.loggedInMandator=function(){return this.loginMandator},loginContext.setLoginData=function(user,mandator){console.log(user),this.loggedIn=!0,this.loginUser=user,this.loginMandator=mandator,this.broadcastLoginContextChanged()},loginContext.logout=function(){this.loggedIn=!1,Restangular.one("api/auth","logout").get(),this.broadcastLoginContextChanged()},loginContext.broadcastLoginContextChanged=function(){$rootScope.$broadcast("loginContextChanged")},loginContext.refreshLoginContext=function(){var that=this;Restangular.one("api/backendLoginContext?format=json").getList().then(function(loginContext){console.log("Received LoginContext"),console.log(loginContext),that.setLoginData(loginContext.User,loginContext.Mandator),$location.path("/")},function(){console.log("Could not get a valid loginContext -> Redirect to login page"),$location.path("/login")})},loginContext.getLoginContext=function(success,error){return Restangular.one("api/backendLoginContext?format=json").getList().then(success,error)},loginContext}]),angular.module("woozle").factory("WoozleMandatorSelectionService",function(Restangular){return{getAssignedMandators:function(success,error){return Restangular.one("api/mandatorsForSelection?format=json").getList().then(success,error)},selectMandator:function(mandator,success,failed){{var mandatorSelection=Restangular.all("api/mandatorselect?format=json"),data={SelectedMandator:mandator};mandatorSelection.post(data).then(success,failed)}}}}),angular.module("woozle").factory("WoozleNavigationService",function(Restangular){return{getNavigation:function(success,error){return Restangular.one("api/navigation?format=json").getList().then(success,error)}}});